---
title: "test"
author: "test"
output:
  html_document:
    theme: yeti
    toc: true
    toc_float: true
    code_folding: hide
---

```{r setup, include=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo = TRUE)
set.seed(2020)

install.packages("dplyr", repos =  "http://cran.us.r-project.org") #1.0.0

libs <- c("tidyverse", "knitr", "kableExtra", "gridExtra", "grid",
          "ggpubr", "modelr", "gganimate", "gifski", "png", "rstan", "brms",
          "tidybayes", "bayesplot", "loo", "extraDistr")

not_found <- libs[!(libs %in% installed.packages()[,"Package"])]
if(length(not_found)){
  install.packages(not_found, repos =  "http://cran.us.r-project.org")
  }

```

## Intro
The following code aims to be a step-by-step walkthrough on how to implement and evaluate a Bayesian Linear Mixed Effects model for simulated website bounce rate data across English counties. The response variable $y$ is website bounce rate in seconds (bounce rate = time a user spends on a website), and independent variable are `age` (user age) and `location` (county).


## Load Packages
```{r load_packages, message=FALSE}

require(tidyverse)
require(dplyr) # dplyr 1.0.0
require(knitr)
require(kableExtra)
require(gridExtra)
require(grid)
require(ggpubr)
require(modelr)
library(magrittr)
# library(readr)

# Animation library
require(gganimate)
require(gifski)
require(png)

# Mixed Effects Model libraries
require(rstan)
require(brms)
require(tidybayes)
require(bayesplot)
require(loo)

# Prior libraries
require(extraDistr)
```

## Load Data
```{r}
#cols() suppresses messages
# bounce_data <- read_csv("bounce_rates_sim.csv", 
#                         col_types = cols() )  %>% 
#   mutate(county = as.factor(county))
# 
# kable(bounce_data) %>% 
# kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
#   row_spec(0, background = "#4CAF50", color="#FFF")  %>% 
#   scroll_box(width = "100%", height = "200px") 
print(1:10)
```


## References

1. Gelman, A., Carlin, J. B., Stern, H. S., Dunson, D. B., Vehtari, A., & Rubin, D. B. (2013). Bayesian data analysis. CRC press.

2. Gabry, Jonah, et al. “Visualization in Bayesian workflow.” Journal of the Royal Statistical Society: Series A (Statistics in Society) 182.2 (2019): 389–402.

2. BRMS. https://paul-buerkner.github.io/brms/